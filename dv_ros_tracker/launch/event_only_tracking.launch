<launch>
    <env name="ROSCONSOLE_FORMAT" value="[${severity}] [${time}] [${node}]: ${message}"/>

    <!-- Camera capture node -->
    <node pkg="dv_ros_capture" type="capture_node" name="capture_node" clear_params="true" output="screen"
          required="true"/>

    <!-- Load camera parameters -->
    <node name="dynamic_reconfigure_load" pkg="dynamic_reconfigure" type="dynparam"
          args="load /capture_node $(find dv_ros_capture)/config/dynamic.yaml"/>

    <!-- Tracker -->
    <node pkg="dv_ros_tracker" type="tracker_node" name="tracker_node_motion_aware" clear_params="true" output="screen"
          required="true">
        <rosparam command="load" file="$(find dv_ros_tracker)/config/event_only_settings.yaml"/>

        <remap from="/tracker_node_motion_aware/image" to="/capture_node/camera/image"/>
        <remap from="/tracker_node_motion_aware/events" to="/capture_node/events"/>
        <remap from="/tracker_node_motion_aware/camera_info" to="/capture_node/camera_info"/>
    </node>

    <node pkg="rqt_gui" type="rqt_gui" name="gui"
          args="--perspective-file $(find dv_ros_tracker)/config/rqt/tracker_visualizer.perspective"/>
</launch>
